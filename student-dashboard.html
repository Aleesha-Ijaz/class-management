<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - CMS</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Styles -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/admin.css"> <!-- Reusing dashboard layout -->
    <link rel="stylesheet" href="css/student.css">
</head>

<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <i class="fas fa-graduation-cap"></i>
                <span>CMS Student</span>
            </div>
            <nav class="sidebar-nav">
                <ul>
                    <li class="active" data-tab="overview">
                        <i class="fas fa-home"></i> Dashboard
                    </li>
                    <li data-tab="classes">
                        <i class="fas fa-book-reader"></i> My Classes
                    </li>
                    <li data-tab="calendar">
                        <i class="fas fa-calendar-alt"></i> Academic Calendar
                    </li>
                    <li data-tab="assignments">
                        <i class="fas fa-tasks"></i> Assignments
                    </li>
                    <li data-tab="grades">
                        <i class="fas fa-award"></i> My Grades
                    </li>
                    <li data-tab="profile">
                        <i class="fas fa-user-circle"></i> My Profile
                    </li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <button class="btn-logout" onclick="Storage.logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="top-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search my courses, assignments...">
                </div>
                <div class="top-bar-right">
                    <button class="theme-toggle" onclick="Utils.toggleTheme()">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="user-profile">
                        <img src="https://ui-avatars.com/api/?name=Student&background=ec4899&color=fff" alt="Student">
                        <span id="student-name">Student Name</span>
                    </div>
                </div>
            </header>

            <div class="content-body">
                <!-- Overview Tab -->
                <section id="overview-tab" class="tab-content active">
                    <div class="welcome-banner glass animate-fade-in">
                        <div class="welcome-content">
                            <div class="welcome-profile-pic">
                                <img src="https://ui-avatars.com/api/?name=Student&background=ec4899&color=fff"
                                    id="banner-profile-img" alt="Student">
                            </div>
                            <div class="welcome-text">
                                <h1>Hello, <span id="welcome-name">Student</span>! ðŸ‘‹</h1>
                                <p>You have 3 assignments due this week. Stay on track!</p>
                            </div>
                        </div>
                    </div>

                    <div class="stats-grid mt-2">
                        <div class="stat-card animate-slide-up">
                            <div class="stat-icon purple"><i class="fas fa-award"></i></div>
                            <div class="stat-info">
                                <h3 id="stat-gpa">3.85</h3>
                                <p>Current GPA</p>
                            </div>
                        </div>
                        <div class="stat-card animate-slide-up" style="animation-delay: 0.1s">
                            <div class="stat-icon success-bg"><i class="fas fa-user-check"></i></div>
                            <div class="stat-info">
                                <h3 id="stat-attendance-perc">92%</h3>
                                <p>Attendance</p>
                            </div>
                        </div>
                        <div class="stat-card animate-slide-up" style="animation-delay: 0.2s">
                            <div class="stat-icon orange"><i class="fas fa-check-double"></i></div>
                            <div class="stat-info">
                                <h3 id="stat-completed-courses">12</h3>
                                <p>Courses Completed</p>
                            </div>
                        </div>
                    </div>

                    <div class="grid-2 mt-2">
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="fas fa-bullhorn text-primary mr-1"></i> Announcements</h2>
                            </div>
                            <div class="announcements-list" id="dashboard-announcements">
                                <!-- Dynamic content -->
                                <p class="text-muted">Loading announcements...</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header">
                                <h2><i class="fas fa-calendar-day text-primary mr-1"></i> Today's Schedule</h2>
                            </div>
                            <div class="timeline" id="today-schedule">
                                <!-- Dynamic content -->
                                <p class="text-muted">No classes today.</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Classes Tab -->
                <section id="classes-tab" class="tab-content">
                    <div class="section-header">
                        <h2>My Enrolled Classes</h2>
                    </div>
                    <div class="classes-grid" id="enrolled-classes-list">
                        <!-- Class Cards -->
                    </div>
                </section>

                <!-- Calendar Tab -->
                <section id="calendar-tab" class="tab-content">
                    <div class="calendar-wrapper card">
                        <div class="calendar-header-ui">
                            <div class="calendar-nav">
                                <button onclick="Student.changeMonth(-1)"><i class="fas fa-chevron-left"></i></button>
                                <h2 id="calendar-month-year">Month Year</h2>
                                <button onclick="Student.changeMonth(1)"><i class="fas fa-chevron-right"></i></button>
                            </div>
                            <div class="calendar-legend">
                                <span class="legend-item"><i class="dot class"></i> Class</span>
                                <span class="legend-item"><i class="dot exam"></i> Exam</span>
                                <span class="legend-item"><i class="dot assignment"></i> Assignment</span>
                                <span class="legend-item"><i class="dot holiday"></i> Holiday</span>
                            </div>
                        </div>
                        <div class="calendar-grid-container">
                            <div class="calendar-days-header">
                                <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                            </div>
                            <div id="calendar-grid" class="calendar-grid">
                                <!-- Calendar days injected by JS -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Assignments & Exams Tab -->
                <section id="assignments-tab" class="tab-content">
                    <div class="section-header">
                        <h2>Assignments & Exams</h2>
                        <div class="tab-sub-nav">
                            <button class="active"
                                onclick="Student.switchAssignmentView('assignments')">Assignments</button>
                            <button onclick="Student.switchAssignmentView('exams')">Exam Schedule</button>
                        </div>
                    </div>

                    <div id="assignment-view-container">
                        <div class="filters mb-2">
                            <select id="assignment-status-filter" onchange="Student.renderAssignments()">
                                <option value="all">All Assignments</option>
                                <option value="upcoming">Upcoming</option>
                                <option value="submitted">Submitted</option>
                                <option value="graded">Graded & Feedback</option>
                            </select>
                        </div>
                        <div class="assignments-timeline" id="student-assignments-list">
                            <!-- Assignment Items -->
                        </div>
                    </div>

                    <div id="exam-view-container" style="display: none;">
                        <div class="exams-grid" id="student-exams-list">
                            <!-- Exam Cards -->
                        </div>
                    </div>
                </section>

                <!-- Grades Tab -->
                <section id="grades-tab" class="tab-content">
                    <div class="section-header">
                        <h2>Performance & Grades</h2>
                    </div>

                    <div class="performance-grid">
                        <!-- GPA Card -->
                        <div class="card gpa-card animate-slide-up">
                            <div class="gpa-content">
                                <div class="gpa-value">3.85</div>
                                <div class="gpa-label">Current CGPA</div>
                            </div>
                            <div class="gpa-details">
                                <span><i class="fas fa-arrow-up text-success"></i> +0.15 this semester</span>
                            </div>
                        </div>

                        <!-- Attendance Summary Card -->
                        <div class="card attendance-summary-card animate-slide-up" style="animation-delay: 0.1s">
                            <h3>Attendance Record</h3>
                            <div class="attendance-chart-container">
                                <canvas id="attendanceDoughnut"></canvas>
                                <div class="attendance-percentage">92%</div>
                            </div>
                        </div>
                    </div>

                    <div class="grid-2 mt-2">
                        <!-- Progress Chart -->
                        <div class="card animate-slide-up" style="animation-delay: 0.2s">
                            <div class="card-header">
                                <h2>Academic Progress</h2>
                            </div>
                            <div class="chart-container" style="height: 250px;">
                                <canvas id="gradeProgressChart"></canvas>
                            </div>
                        </div>

                        <!-- Subject-wise Grades -->
                        <div class="card animate-slide-up" style="animation-delay: 0.3s">
                            <div class="card-header">
                                <h2>Subject-wise Grades</h2>
                            </div>
                            <div class="table-responsive">
                                <table class="grade-table">
                                    <thead>
                                        <tr>
                                            <th>Subject</th>
                                            <th>Score</th>
                                            <th>Grade</th>
                                        </tr>
                                    </thead>
                                    <tbody id="student-grades-table-body">
                                        <!-- Dynamic content -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Profile Tab -->
                    <section id="profile-tab" class="tab-content">
                        <div class="grid-2">
                            <!-- Edit Profile Card -->
                            <div class="card animate-slide-up">
                                <div class="card-header">
                                    <h2><i class="fas fa-user-edit mr-1"></i> Edit Profile</h2>
                                </div>
                                <form id="profile-form" onsubmit="event.preventDefault(); Student.updateProfile();">
                                    <div class="form-group">
                                        <label>Full Name</label>
                                        <input type="text" id="profile-name" class="form-control"
                                            placeholder="Your Name">
                                    </div>
                                    <div class="form-group">
                                        <label>Email Address</label>
                                        <input type="email" id="profile-email" class="form-control" placeholder="Email">
                                    </div>
                                    <div class="form-group">
                                        <label>Phone Number</label>
                                        <input type="text" id="profile-phone" class="form-control"
                                            placeholder="Phone Number">
                                    </div>
                                    <button type="submit" class="btn btn-primary mt-1">Save Profile Changes</button>
                                </form>
                            </div>

                            <div class="profile-settings-column">
                                <!-- Change Password Card -->
                                <div class="card animate-slide-up" style="animation-delay: 0.1s">
                                    <div class="card-header">
                                        <h2><i class="fas fa-lock mr-1"></i> Change Password</h2>
                                    </div>
                                    <form id="password-form"
                                        onsubmit="event.preventDefault(); Student.changePassword();">
                                        <div class="form-group">
                                            <label>Current Password</label>
                                            <input type="password" id="current-password" class="form-control"
                                                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                        </div>
                                        <div class="form-group">
                                            <label>New Password</label>
                                            <input type="password" id="new-password" class="form-control"
                                                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                        </div>
                                        <button type="submit" class="btn btn-secondary mt-1">Update Password</button>
                                    </form>
                                </div>

                                <!-- Notification Settings Card -->
                                <div class="card mt-2 animate-slide-up" style="animation-delay: 0.2s">
                                    <div class="card-header">
                                        <h2><i class="fas fa-bell mr-1"></i> Notifications</h2>
                                    </div>
                                    <div class="settings-list">
                                        <div class="setting-item">
                                            <div class="setting-info">
                                                <h4>Email Notifications</h4>
                                                <p>Receive updates about assignments and grades.</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" checked onchange="Student.saveSettings()">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                        <div class="setting-item mt-1">
                                            <div class="setting-info">
                                                <h4>Push Notifications</h4>
                                                <p>Get instant alerts on your mobile device.</p>
                                            </div>
                                            <label class="switch">
                                                <input type="checkbox" onchange="Student.saveSettings()">
                                                <span class="slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>

                                <!-- Logout Card -->
                                <button class="btn btn-danger btn-block mt-2 animate-slide-up"
                                    style="animation-delay: 0.3s" onclick="Storage.logout()">
                                    <i class="fas fa-sign-out-alt mr-1"></i> Logout from Session
                                </button>
                            </div>
                        </div>
                    </section>
            </div>
            <!-- Modal Container for Course Details, Materials, etc. -->
            <div id="modal-container" class="modal-container" style="display: none;"></div>
        </main>
    </div>

    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/student.js"></script>
</body>

</html>